{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Fuente -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <title>Imperium · Panel de cámaras</title>
    <link rel="stylesheet" href="{% static 'home.css' %}">
</head>
<body>
    <div class="header">
        <div class="logo">
            <div class="logo-icon">I</div>
            <span class="logo-text" style="font-weight:900;letter-spacing:-2px;">IMPERIUM</span>
        </div>
        <div class="user-actions">
            
            <a href="{% url 'cameras:logout' %}" class="logout-btn">Cerrar sesión</a>
        </div>
    </div>

    <div class="main-content">
        <div class="cameras-container">
            <div class="panel-header">
                <div>
                    <h1 class="panel-title">Cámaras activas</h1>
                    <p class="panel-subtitle">Gestiona tus flujos RTSP, genera QR y captura evidencia en tiempo real.</p>
                </div>
            </div>

            {% if cameras %}
                <div class="camera-grid">
                    {% for camera in cameras %}
                    <div class="camera-card">
                        <h3>{{ camera.name }}</h3>
                            {% if camera.last_capture %}
                                <img src="{{ camera.last_capture }}" alt="{{ camera.name }}" class="camera">
                            {% else %}
                                <img src="{% static 'imperium_logo.png' %}" alt="{{ camera.name }}" class="camera placeholder">
                            {% endif %}
                        {% if camera.description %}
                        <p class="camera-desc">{{ camera.description }}</p>
                        {% endif %}
                        <div class="camera-actions">
                            <a href="{% url 'cameras:generate_qr' camera.id %}" target="_blank" class="qr-link">Ver cámara</a>
                            <a href="{% url 'cameras:capture_frame' camera.id %}" class="qr-link">Capturas</a>
                            <a href="{% url 'cameras:delete_camera' camera.id %}" class="delete-link" onclick="return confirm('¿Estás seguro de que deseas eliminar esta cámara?');">Eliminar cámara</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state">
                    <p id="empty-state-text">No hay cámaras registradas todavía.</p>
                    <p>Agrega tu primera cámara usando RTSP para comenzar a monitorear.</p>
                </div>
            {% endif %}

            <a href="{% url 'cameras:add_camera' %}" class="add-camera-link">
                <div class="add-camera-box">
                    <span class="add-camera-icon">➕</span>
                    <div class="add-camera-text">
                        <strong>Agregar cámara,</strong>
                        <span>Registrar nueva cámara RTSP o generar un QR de acceso</span>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="bottom-bar">
        <div class="section">
            <a href="{% url 'cameras:captures_gallery' %}">Capturas</a>
        </div>
    </div>
</body>
</html>
